{% extends 'store/base.html' %}

{% load custom_filters %}  {# Cargar los filtros personalizados #}

{% block content %}
    <div class="container mt-5">
        <h1>Tu Carrito</h1>

        {% if products %}
            <ul class="list-group">
                {% for item in products %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <h5>{{ item.product.name }}</h5>
                            <p>Cantidad: {{ item.quantity }}</p>
                        </div>
                        <div>
                            <p>Precio: {{ item.product.price|floatformat:2 }} COP</p>
                            <p>Total: {{ item.product.price|multiply:item.quantity|floatformat:2 }} COP</p>
                        </div>
                    </li>
                {% endfor %}
            </ul>

            <h3 class="mt-3">Total: {{ total|floatformat:2 }} COP</h3>
            
            <a href="{% url 'simulate_purchase' %}" class="btn btn-success mt-3">Simular Compra</a>
        {% else %}
            <p>Tu carrito está vacío.</p>
        {% endif %}
        
        <a href="{% url 'clear_cart' %}" class="btn btn-danger mt-3">Limpiar Carrito</a>
    </div>
{% endblock %}
